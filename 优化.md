
## 任务

1. 打印所有行数
2. 第8列包含名字， 打印 432 和 43243 个名字
3. 第5列包含日期，计算每月一共有多少捐款
4. 还是第8列，抽取出名字，计算出最常见的名字，以及一共出现的次数

## Revision 0  基础版本

firstNamePat := regexp.MustCompile(", \\s*([^, ]+)")
names := make([]string, 0)
firstNames := make([]string, 0)
dates := make([]string, 0)
commonName := ""
commonCount := 0


这个版本 33秒

## Revision 1  goroutine 版本

CPU-0: [read line1][read line2][read line3]
CPU-1:             [process line1]         [process line3]
CPU-2:                         [process line2]


send name      -> [ nameC      ] --\ 
send firstName -> [ firstNameC ] --- -> select() one -> [ append one to a list ]
send date      -> [ datesC     ] --/ 

每行一个 goroutine
12分钟  732秒

##  Revision 2 – Channels Reduced

减少channel
每64k一个goroutine
18.285秒


## Revision 3 – Multiple Entries to Send

10.66832747s

## Revision 4 – Hang in on a Mutex


## Revision 6 – Reuse Allocated Memory




## Revision 7: Regexp Usage

正则表达式优化

non-capturing groups

使用regexp.FindString() 替换 firstNamePat.FindAllStringSubmatch

8.155115627s

## Revision 8: No Regexp

不要使用正则表达式，直接使用string 分割，取var[0]

6.644675587s

## Revision 9 – Reduce the Garbage

减少垃圾回收
names := make([]string, 0)
firstNames := make([]string, 0)
dates := make([]string, 0)

这些变量都不要存。 存日期不要使用string，优化格式。


## 补充

1. 如何判断优化已经到达极限？ 

不parse，光读取一遍文件，也需要3.56s

2. 更进一步

使用 scanner.Bytes() 替换 scanner.Text() ，光读取一遍可以下降到2.392783786s

3. 核数的影响

GOMAXPROCS=1 go run ./rev9/readfile9.go itcont.txt
GOMAXPROCS=2 go run ./rev9/readfile9.go itcont.txt
GOMAXPROCS=4 go run ./rev9/readfile9.go itcont.txt

进行测试
